
<%= render 'modal', post: Post.new %>

<!-- Post Body-->

<ul class="post card-deck-wrapper">
  <div class="flex-row row">
	<% @posts.each do |f| %>
      <div class="col-xs-6 col-sm-4 col-lg-3">
      		<li>Posted: <%= f.created_at.strftime('%D') %></li>
      		<div class="panel panel-primary" id="post-container">
      		  <div class="panel-heading">
      				<h2 class="panel-title"><li><%= f.title %> </li></h2>
      			</div>
      			<div class="panel-body flex-text">
      				<li><%= f.description %></li>
      			</div>
            <% if f.image.exists? %>
              <div class="panel-body ">
                  <%= image_tag f.image.url(:large), class: "post-img flex-row" %>
              </div>
            <% end %>
            <div class="panel-body ">
              <% f.attachements.each do |a| %>
                <%= image_tag a.image.url(:large), class: "post-img flex-row" %>
              <% end %>
            </div>
            
            <div class="panel-body flex-text">
              <li>Tags: <%= raw f.tag_list.map { |t| link_to t, tag_path(t) }.join(', ') %></li>
              <li>Location: <%= f.loc_name %></li>
              <li>Latitude: <%= f.lat %>, Longitude: <%= f.lng %></li>
            </div>


      			<div class="panel-body">
            <%= render 'modal', post: f %>
            <%= render "comments", post: f %>
    						<ul class="nav navbar-nav">
                <li>

                  <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#post-comments-<%= f.id %>">
                    <!--<span class="glyphicon glyphicon-comment" aria-hidden="true"></span><br />-->
                    Comment
                    <span class="badge"><%= f.comments.count %></span>
                  </button>   
                </li>
                    <li>
                      <% if logged_in? && current_user == f.user %>           
                        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#edit-post-<%= f.id %>">
                          Edit Post
                         <!-- <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>-->
                        </button>    
                        </li>
        						    <li> 
                          <%= button_to f, method: :delete, remote: true, class: "btn btn-primary btn-sm" do %>
                            Delete Post
                            <!--<span class="glyphicon glyphicon-trash"></span>-->
                          <% end %>
                        </li>
                      <% end %>
    						 </ul>
    					</div>
               <small>Created By <%= f.user.username %></small>
    		  		</li>
    		  	</div>
		  </div>
  	<% end %>
    </div>
</ul>


<p class="notice"><%= notice %></p>
<p class="alert"><%= alert %></p>

<style>
/* Extra Media Query Below for Retina Iphones and Smaller */
@media only screen and (max-width : 480px){
  .flex-row > [class*='col-'] {
      width: 100%;
  }
  .flex-row  {
    padding-left: 0px;
    padding-right: 0px;
  }
}
</style>

